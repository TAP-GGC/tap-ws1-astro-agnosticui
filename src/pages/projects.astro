---
// src/pages/projects.astro

import "../styles/global.css";
import "agnostic-vue/dist/common.properties.min.css";
import "agnostic-vue/dist/common.resets.min.css";
import "agnostic-vue/dist/common.utilities.min.css";
import "agnostic-vue/dist/opinions.min.css";
import "agnostic-vue/dist/index.css";

import TAPDefaultLayout from "../layouts/default.astro";
import ProjectSearch from "../components/ProjectSearch.vue";
import Crumbs from '../components/Crumbs.vue';
import { getCollection } from 'astro:content';

const projects = await getCollection('projects');
const currentPage = Number(Astro.url.searchParams.get("page")) || 1;
const pageSize = 10;
---

<TAPDefaultLayout title="Outreach Projects">
  <Crumbs pageType="projects" pageUrl="/projects" />

  <ProjectSearch 
    client:load 
    projectList={projects} 
    currentPage={currentPage} 
    pageSize={pageSize} 
  />
</TAPDefaultLayout>
